<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>V·∫°n Qu·ªëc Tranh B√°</title>
  
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <!-- SVG SPRITE (gradient + shadow) -->
  <svg width="0" height="0" style="position:absolute; left:-9999px; top:-9999px" aria-hidden="true">
    <defs>
      <filter id="ds" x="-30%" y="-30%" width="160%" height="160%">
        <feDropShadow dx="0" dy="1.2" stdDeviation="1.2" flood-color="#2b241a" flood-opacity="0.35"/>
      </filter>

      <linearGradient id="g-wood" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#f3d7a8"/><stop offset="0.55" stop-color="#b77a3a"/><stop offset="1" stop-color="#7a4a22"/>
      </linearGradient>
      <linearGradient id="g-clay" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#ffd0b5"/><stop offset="0.55" stop-color="#d06a3a"/><stop offset="1" stop-color="#8e3d1f"/>
      </linearGradient>
      <linearGradient id="g-iron" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#d6ecff"/><stop offset="0.55" stop-color="#6aa3d6"/><stop offset="1" stop-color="#2f5e86"/>
      </linearGradient>
      <linearGradient id="g-crop" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#fff6b8"/><stop offset="0.55" stop-color="#c9b44b"/><stop offset="1" stop-color="#7c6a24"/>
      </linearGradient>
      <linearGradient id="g-ui" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#f8e6b6"/><stop offset="0.55" stop-color="#c79f58"/><stop offset="1" stop-color="#8b5a2b"/>
      </linearGradient>

      <symbol id="i-wood" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M5 11c0-2 2-4 7-4s7 2 7 4v2c0 2-2 4-7 4s-7-2-7-4v-2z" fill="url(#g-wood)" stroke="#2b241a" stroke-width="1.3"/>
          <path d="M7 12h4M13 14h4" stroke="rgba(255,255,255,.7)" stroke-width="1.2" stroke-linecap="round"/>
          <path d="M6.2 11.3c1-1.8 3.2-2.8 5.8-2.8" stroke="rgba(255,255,255,.35)" stroke-width="2" stroke-linecap="round"/>
        </g>
      </symbol>

      <symbol id="i-clay" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M6 9h6v7H6z" fill="url(#g-clay)" stroke="#2b241a" stroke-width="1.3"/>
          <path d="M12 9h6v7h-6z" fill="url(#g-clay)" stroke="#2b241a" stroke-width="1.3"/>
          <path d="M6 12.5h12" stroke="rgba(255,255,255,.55)" stroke-width="1.2"/>
        </g>
      </symbol>

      <symbol id="i-iron" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M6 14c0-2 3-4 6-4s6 2 6 4v2c0 2-3 4-6 4s-6-2-6-4v-2z" fill="url(#g-iron)" stroke="#2b241a" stroke-width="1.3"/>
          <path d="M9 10V8h6v2" stroke="rgba(255,255,255,.65)" stroke-width="1.2" stroke-linecap="round"/>
        </g>
      </symbol>

      <symbol id="i-crop" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M12 20V6" stroke="#2b241a" stroke-width="1.4" stroke-linecap="round"/>
          <path d="M12 10c-2 0-4-2-4-4 2 0 4 2 4 4Z" fill="url(#g-crop)" stroke="#2b241a" stroke-width="1"/>
          <path d="M12 12c2 0 4-2 4-4-2 0-4 2-4 4Z" fill="url(#g-crop)" stroke="#2b241a" stroke-width="1"/>
          <path d="M12 15c-2 0-4 2-4 4 2 0 4-2 4-4Z" fill="url(#g-crop)" stroke="#2b241a" stroke-width="1"/>
          <path d="M12 17c2 0 4 2 4 4-2 0-4-2-4-4Z" fill="url(#g-crop)" stroke="#2b241a" stroke-width="1"/>
        </g>
      </symbol>

      <symbol id="i-up" viewBox="0 0 24 24">
        <g filter="url(#ds)" stroke="#2b241a" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none">
          <path d="M12 19V6"/><path d="M7.5 10.5 12 6l4.5 4.5"/>
        </g>
        <path d="M12 19V6" stroke="rgba(255,255,255,.35)" stroke-width="3" stroke-linecap="round"/>
      </symbol>

      <symbol id="i-shield" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M12 3l7 4v6c0 5-3 8-7 8s-7-3-7-8V7l7-4Z"
                fill="url(#g-ui)" stroke="#2b241a" stroke-width="1.3"/>
          <path d="M12 7v10" stroke="rgba(255,255,255,.55)" stroke-width="1.4" stroke-linecap="round"/>
        </g>
      </symbol>

      <symbol id="i-sword" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M4 20l6-6" stroke="#2b241a" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M9 5l10 10" stroke="url(#g-ui)" stroke-width="2.4" stroke-linecap="round"/>
          <path d="M8.5 6.5l2-2 8 8-2 2z" fill="url(#g-ui)" stroke="#2b241a" stroke-width="1.2"/>
        </g>
      </symbol>

      <symbol id="i-home" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M5 20V10l7-5 7 5v10" fill="url(#g-ui)" stroke="#2b241a" stroke-width="1.2"/>
          <path d="M9 20v-6h6v6" fill="rgba(255,255,255,.35)" stroke="#2b241a" stroke-width="1.1"/>
        </g>
      </symbol>

      <symbol id="i-scroll" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M7 4h10v16H7" fill="url(#g-ui)" stroke="#2b241a" stroke-width="1.2"/>
          <path d="M7 8h8M7 12h8M7 16h6" stroke="rgba(255,255,255,.55)" stroke-width="1.2" stroke-linecap="round"/>
        </g>
      </symbol>

      <symbol id="i-barracks" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M4 18V9l8-5 8 5v9" fill="url(#g-ui)" stroke="#2b241a" stroke-width="1.2"/>
          <path d="M8 18v-5h8v5" fill="rgba(255,255,255,.35)" stroke="#2b241a" stroke-width="1.1"/>
        </g>
      </symbol>

      <symbol id="i-map" viewBox="0 0 24 24">
        <g filter="url(#ds)">
          <path d="M3 6l6-2 6 2 6-2v14l-6 2-6-2-6 2V6Z" fill="url(#g-ui)" stroke="#2b241a" stroke-width="1.1"/>
          <path d="M9 4v14M15 6v14" stroke="rgba(255,255,255,.55)" stroke-width="1.2" stroke-linecap="round"/>
        </g>
      </symbol>
    </defs>
  </svg>

  <div class="topbar">
    <div class="brand">
      <span class="iTok" data-tip="V·∫°n Qu·ªëc Tranh B√°">
        <span class="i" aria-hidden="true">üè†</span>
      </span>
      V·∫°n Qu·ªëc Tranh B√°
    </div>
    <div class="top-right" id="topbar"></div>
  </div>

  <div class="app">
    <div class="panel">
      <div class="hd">
        <div class="title"><span class="iTok" aria-hidden="true"><span class="i">üß≠</span></span> Danh m·ª•c</div>
      </div>
      <div class="bd nav scroll" id="sidebar"></div>
    </div>

    <div class="midCol">
      <!-- Progress component (global status bar, independent) -->
      <div class="statusDock statusBar" id="mainProgress"></div>

      <!-- Building panel: title + details in ONE container -->
      <div class="panel mainBodyPanel">
        <div class="hd">
          <div class="title" id="mainTitle"></div>
          <div class="tiny" id="mainHint"></div>
        </div>
        <div class="bd scroll" id="main"></div>
      </div>
    </div>

<div class="panel">
      <div class="hd">
        <div class="title"><span class="iTok" aria-hidden="true"><span class="i">üéí</span></span> Kho</div>
      </div>
      <div class="bd scroll" id="right"></div>
    </div>
  </div>

  <!-- Twemoji (render Emoji -> SVG for consistent look across devices) -->
  <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js" crossorigin="anonymous"></script>

  <script src="./src/01_config.js"></script>
  <script src="./src/02_helpers.js"></script>
  <script src="./src/03_icons_helpers.js"></script>
  <script src="./src/04_game_defs.js"></script>
  <script src="./src/05_state.js"></script>
  <script src="./src/05a_persist.js"></script>
  <script src="./src/06_dom_cache.js"></script>
  <script src="./src/07_utils.js"></script>
  <script src="./src/08_map_init.js"></script>
  <script src="./src/09_march_helpers.js"></script>
  <script src="./src/10_ui_mount.js"></script>
  <script src="./src/11a_main_progress_component.js"></script>
  <script src="./src/11_main_render_only_on_navigation_actions.js"></script>
  <script src="./src/12_main_actions.js"></script>
  <script src="./src/13_map_handlers.js"></script>
  <script src="./src/14_engine_tick.js"></script>
  <script src="./src/15_raf_patch_render.js"></script>
  <script src="./src/16_raf_loop.js"></script>
  <script src="./src/17_boot.js"></script>
</body>
</html>
